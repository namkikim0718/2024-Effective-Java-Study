# ìƒì„±ìì— ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë”ë¥¼ ê³ ë ¤í•˜ë¼
ì •ì  íŒ©í„°ë¦¬ì™€ ìƒì„±ìëŠ” ë˜‘ê°™ì€ ì œì•½ì´ í•˜ë‚˜ ìˆë‹¤.

> ### **ì„ íƒì  ë§¤ê°œë³€ìˆ˜ê°€ ë§ì„ ë•Œ ì ì ˆíˆ ëŒ€ì‘í•˜ê¸° ì–´ë µë‹¤.**

## ì ì¸µì  ìƒì„±ì íŒ¨í„´
```java
public class NutritionFacts {

    private final int servingSize;          // í•„ìˆ˜
    private final int servings;         // í•„ìˆ˜
    private final int calories;         // ì„ íƒ
    private final int fat;              // ì„ íƒ
    private final int sodium;           // ì„ íƒ
    private final int carbohydrate;     // ì„ íƒ

    public NutritionFacts(int servingSize, int servings,) {
        this(ServingSize, servings);
    }

    public NutritionFacts(int servingSize, int servings, int calories) {
        this(ServingSize, servings, calories);
    }

    public NutritionFacts(int servingSize, int servings, int calories, int fat) {
        this(ServingSize, servings, calories, fat);
    }

    public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium, int carbohydrate) {
        this.servingSize = servingSize;
        this.servings = servings;
        this.calories = calories;
        this.fat = fat;
        this.sodium = sodium;
        this.carbohydrate = carbohydrate;
    }
}
```
NutritionFacts í´ë˜ìŠ¤ì—ì„œëŠ” servingSizeì™€ servingsë§Œ í•„ìˆ˜ í•­ëª©ì´ì§€ë§Œ, ë‚˜ë¨¸ì§€ëŠ” ì„ íƒ í•­ëª©ì´ë‹¤.

ì—¬ê¸°ì—ëŠ” ì‹¬ê°í•œ ë‹¨ì ì´ ìˆë‹¤.

**ë§¤ê°œë³€ìˆ˜ ê°œìˆ˜ê°€ ë§ì•„ì§€ë©´ ì½”ë“œë¥¼ ì‘ì„±í•˜ê±°ë‚˜ ì½ê¸° ì–´ë µë‹¤!**

## ìë°”ë¹ˆì¦ˆ íŒ¨í„´
```java
public class NutritionFacts {

    private final int servingSize;          // í•„ìˆ˜
    private final int servings;         // í•„ìˆ˜
    private final int calories;         // ì„ íƒ
    private final int fat;              // ì„ íƒ
    private final int sodium;           // ì„ íƒ
    private final int carbohydrate;     // ì„ íƒ

    public NutritionFacts() {}

    public void setServingSize(int val) {servingSize = val;}
    public void setServings(int val) {servings = val;}
    public void setCalories(int val) {calories = val;}
    public void setFat(int val) {fat = val;}
    public void setSodium(int val) {sodium = val;}
}
```

ì—¬ê¸°ë„ ì‹¬ê°í•œ ë‹¨ì ì´ ìˆë‹¤.

**í•˜ë‚˜ì˜ ê°ì²´ë¥¼ ìƒì„±í•˜ë ¤ë©´ ë©”ì„œë“œë¥¼ ì—¬ëŸ¬ ê°œ í˜¸ì¶œí•´ì•¼ í•˜ê³ , ê°ì²´ê°€ ì™„ì „íˆ ìƒì„±ë˜ê¸° ì „ê¹Œì§€ ì¼ê´€ì„±ì´ ë¬´ë„ˆì§„ë‹¤**

ì´ë ‡ê²Œ `ì ì¸µì  ìƒì„±ì íŒ¨í„´`ê³¼ `ìë°”ë¹ˆì¦ˆ íŒ¨í„´`ì´ ê°€ì§€ê³  ìˆëŠ” ë‹¨ì ì„ ì™„í™”í•˜ê³ ì `ë¹Œë” íŒ¨í„´`ì„ ì‚¬ìš©í•œë‹¤.

**ğŸ¯ ì ì¸µì  ìƒì„±ì íŒ¨í„´ì˜ ì•ˆì „ì„± + ìë°”ë¹ˆì¦ˆ íŒ¨í„´ì˜ ê°€ë…ì„± = ë¹Œë” íŒ¨í„´**

ë¹Œë” íŒ¨í„´ì€ í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ë§Œìœ¼ë¡œ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
```java
public class NutritionFacts {  
  
    private int serving;          // í•„ìˆ˜  
    private int servings;         // í•„ìˆ˜  
    private int calories;         // ì„ íƒ  
    private int fat;              // ì„ íƒ  
    private int sodium;           // ì„ íƒ  
    private int carbohydrate;     // ì„ íƒ
  
    public static class Builder { // (1) NutritionFacts.Builder í´ë˜ìŠ¤
  
        // (2) í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜  
        private int serving;  
        private int servings;  
  
        // (3) ì„ íƒ ë§¤ê°œë³€ìˆ˜  
        private int calories = 0;  
        private int fat = 0;  
        private int sodium = 0;  
        private int carbohydrate = 0;  
  
        public Builder(int serving, int servings) {  // (4) NutritionFacts.Builder ìƒì„±ì
            this.serving = serving;  
            this.servings = servings;  
        }  
  
        public Builder calories(int calories) {  // (5) ì„ íƒ ë§¤ê°œë³€ìˆ˜ë¥¼ ì´ˆê¸°í™” í•˜ê¸°ìœ„í•œ ë©”ì†Œë“œ
            this.calories = calories;  
            return this;  
        }  
  
        public Builder fat(int fat) {  
            this.fat = fat;  
            return this;  
        }  
  
        public Builder sodium(int sodium) {  
            this.sodium = sodium;  
            return this;  
        }  
  
        public Builder carbohydrate(int carbohydrate) {  
            this.carbohydrate = carbohydrate;  
            return this;  
        }  
  
        public NutritionFacts build() {   // (6) NutritionFactsë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì†Œë“œ
            return new NutritionFacts(this);  
        }  
    }  
  
    private NutritionFacts(Builder builder) {  // (7) NutritionFactsì˜ ìƒì„±ì. ì´ˆê¸°í™”ëœ Builderë¥¼ ë°›ëŠ”ë‹¤.
        this.serving = builder.serving;  
        this.servings = builder.servings;  
        this.calories = builder.calories;  
        this.fat = builder.fat;  
        this.sodium = builder.sodium;  
        this.carbohydrate = builder.carbohydrate;  
    }  
}
```

* NutritionFacts í´ë˜ìŠ¤ëŠ” ë¶ˆë³€í•˜ë‹¤
* ë¹Œë” íŒ¨í„´ì€ ìì‹ ì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ì—°ì‡„ì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤ => í”Œë£¨ì–¸íŠ¸ API, ë©”ì„œë“œ ì—°ì‡„

```java
NutritionFacts cocaCola = new NutritionFacts.Builder(240, 8).calories(100).sodium(35).carbohydrate(27).build();
```

**ì´ë ‡ê²Œ ë¹Œë” íŒ¨í„´ì€ ê³„ì¸µì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì™€ í•¨ê»˜ ì“°ê¸° ì¢‹ë‹¤.**

ê³„ì¸µì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¹Œë” íŒ¨í„´ì˜ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì
```java
import java.util.EnumSet;  
import java.util.Set;  
  
public abstract class Pizza {  
  
    public enum Topping {  
        HAM, MUSHROOM, PEPPER, SAUSAGE  
    }  
  
    final Set<Topping> toppings;
  
    abstract static class Builder<T extends Builder<T>> {  // (1) 
  
        EnumSet<Topping> toppings = EnumSet.noneOf(Topping.class); // (2)
        
        public T addTopping(Topping topping) {  // (3)
            toppings.add(topping);  
            return self();  
        } 
  
        protected abstract T self(); // (4)

		abstract Pizza build(); // (5)
    }  
  
    Pizza(Builder builder) {
        this.toppings = builder.toppings;  
    }
}
```

* Builder ëŠ” ì•„ì§ ì •í•´ì§€ì§€ ì•Šì€ Tíƒ€ì…ì„ ì‚¬ìš©í•œë‹¤
    * `Pizza` í•˜ìœ„ í´ë˜ìŠ¤ì— `NyPizzaê°€` ìˆê³ , `NyPizza`ì˜ `Builder` ê°€ `Pizza.Builder`ë¥¼ ìƒì†ë°›ìœ¼ë©´, `NyPizza.Builder` ëŠ” `PizzaBuilder` ë¥¼ extends í•œ `T íƒ€ì…`ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

* T addTopping(Topping topping)
    * Toppingì„ ì´ˆê¸°í™” í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤
    * Pizza.Builder í´ë˜ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ, `Tíƒ€ì…`ì„ ë°˜í™˜í•œë‹¤ => ì—¬ê¸°ì„œ `Tíƒ€ì…`ì€ Pizza.Builder ë¥¼ extends í•œ `NyPizza.Builder`, `CalzonePizza.Builder` ì´ë‹¤

* self
    * í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œë„ í˜•ë³€í™˜í•˜ì§€ ì•Šê³  ë©”ì„œë“œ ì—°ì‡„ë¥¼ ì§€ì›í•  ìˆ˜ ìˆë‹¤

```java
public class NyPizza extends Pizza {  
  
    public enum Size {  
        SMALL, MEDIUM, LARGE;  
    }  
  
    private final Size size;  // í•„ìˆ˜
  
    private final boolean visit; // ì„ íƒ 


    public static class Builder extends Pizza.Builder<Builder> {  // (1)
  
        private final Size size;  // í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜  
  
        private boolean visit = true;  // ì„ íƒ ë§¤ê°œë³€ìˆ˜  
  
        public Builder(Size size) {  // (2)
            this.size = size;  
        }  
  
        public Builder visit(boolean visit) {  // (3)
            this.visit = visit;  
            return this;  
        }  

        @Override  
        protected Builder self() {  // (4)
            return this;  
        }  
        
        @Override  
        NyPizza build() {   // (5)
            return new NyPizza(this);  
        } 
    }  
  
    NyPizza(Builder builder) {  
        super(builder);  
        this.size = builder.size;  
        this.visit = builder.visit;  
    }  
}
```

í•˜ìœ„ í´ë˜ìŠ¤ì˜ `Builder` ê°€ ì •ì˜í•œ build ë©”ì„œë“œëŠ” í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„ ì–¸í•œë‹¤.

> `NyPizza.Builder` => `NyPizza`, `Calzone.Builder` => `Calzone` ë¥¼ ë°˜í™˜í•œë‹¤.

```java
NyPizza pizza = new NyPizza.Builder(SMALL).addTopping(SAUSAGE).addTopping(ONION).build();

Calzone calzone = new Calzone.Builder().addTopping(HAM).sauceInside().build();
```

### ë¹Œë” íŒ¨í„´ì˜ ì¥ì 
ë¹Œë” íŒ¨í„´ì€ ìƒë‹¹íˆ ìœ ì—°í•˜ë‹¤. ë¹Œë” í•˜ë‚˜ë¡œ ì—¬ëŸ¬ ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê³ , ë¹Œë”ì— ë„˜ê¸°ëŠ” ë§¤ê°œë³€ìˆ˜ì— ë”°ë¼ ë‹¤ë¥¸ ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.

### ë¹Œë” íŒ¨í„´ì˜ ë‹¨ì 
* `ê°ì²´ë¥¼ ë§Œë“œë ¤ë©´, ë¹Œë”ë¶€í„° ìƒì„±`í•´ì•¼ í•œë‹¤
* ë¹Œë” ìƒì„± ë¹„ìš©ì´ í¬ì§€ ì•Šì§€ë§Œ `ì„±ëŠ¥ì—ëŠ” ë¯¼ê°í•œ ìƒí™©ì—ì„œ ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤`
* ë§¤ê°œë³€ìˆ˜ê°€ `4ê°œ ì´ìƒ`ì´ ë˜ì–´ì•¼ ê°’ì–´ì¹˜ë¥¼ í•œë‹¤
